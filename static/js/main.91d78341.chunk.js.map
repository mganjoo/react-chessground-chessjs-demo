{"version":3,"sources":["Chessground.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Chessground","children","shapes","onDraw","chessgroundProps","el","useRef","useState","ground","setGround","useEffect","current","NativeChessground","destroy","set","Object","assign","drawable","onChange","setShapes","ref","ChessReq","require","toDests","chess","dests","Map","game_over","SQUARES","forEach","square","moves","verbose","length","map","move","to","toColor","turn","App","fen","setFen","orientation","setOrientation","lastMove","setLastMove","showPromotionDialog","setShowPromotionDialog","pendingMove","setPendingMove","pgn","setPgn","updateBoard","promotion","from","undefined","handlePromotion","piece","className","turnColor","check","in_check","movable","free","color","events","after","orig","dest","some","flags","indexOf","premovable","enabled","newShapes","viewOnly","onClick","reset","undo","disabled","history","in_stalemate","in_checkmate","winningSide","in_threefold_repetition","insufficient_material","in_draw","gameStatus","classNames","hidden","aria-labelledby","role","aria-modal","aria-hidden","id","type","href","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.91d78341.chunk.js","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\"\nimport { Chessground as NativeChessground } from \"chessground\"\nimport \"./Chessground.css\"\nimport { Api as ChessgroundApi } from \"chessground/api\"\nimport { DrawShape } from \"chessground/draw\"\nimport { Config } from \"chessground/config\"\n\ntype ChessgroundProps = Omit<Config, \"drawable\"> & {\n  onDraw?: (shapes: DrawShape[]) => void\n  shapes?: DrawShape[]\n}\n\nconst Chessground: React.FC<ChessgroundProps> = ({\n  children,\n  shapes,\n  onDraw,\n  ...chessgroundProps\n}) => {\n  const el = useRef<HTMLDivElement>(null)\n  const [ground, setGround] = useState<ChessgroundApi>()\n\n  // Initialize and destroy on mount/unmount only\n  useEffect(() => {\n    if (el.current && !ground) {\n      setGround(NativeChessground(el.current, {}))\n    }\n    return () => {\n      if (ground) {\n        ground.destroy()\n      }\n    }\n  }, [ground])\n\n  // Update props after initialization is complete\n  useEffect(() => {\n    if (ground) {\n      ground.set(\n        Object.assign(chessgroundProps, { drawable: { onChange: onDraw } })\n      )\n      if (shapes) {\n        ground.setShapes(shapes)\n      }\n    }\n  }, [ground, chessgroundProps, onDraw, shapes])\n\n  return <div ref={el}>{children}</div>\n}\n\nexport default Chessground\n","import React, { useState } from \"react\"\nimport Chessground from \"./Chessground\"\nimport { ChessInstance, PieceType, Square } from \"chess.js\"\nimport * as cg from \"chessground/types\"\nimport { DrawShape } from \"chessground/draw\"\nimport classNames from \"classnames\"\n\nconst ChessReq = require(\"chess.js\")\n\ntype PromotablePiece = Exclude<PieceType, \"p\" | \"k\">\n\nfunction toDests(chess: ChessInstance): Map<cg.Key, cg.Key[]> {\n  const dests = new Map()\n  if (!chess.game_over()) {\n    chess.SQUARES.forEach((square) => {\n      const moves = chess.moves({ square: square, verbose: true })\n      if (moves.length) {\n        dests.set(\n          square,\n          moves.map((move) => move.to)\n        )\n      }\n    })\n  }\n  return dests\n}\n\nfunction toColor(chess: ChessInstance): cg.Color {\n  return chess.turn() === \"w\" ? \"white\" : \"black\"\n}\n\nconst App: React.FC = () => {\n  const [chess] = useState<ChessInstance>(new ChessReq())\n  const [fen, setFen] = useState(chess.fen())\n  const [orientation, setOrientation] = useState<cg.Color>(\"white\")\n  const [lastMove, setLastMove] = useState<cg.Key[]>()\n  const [shapes, setShapes] = useState<DrawShape[]>()\n  const [showPromotionDialog, setShowPromotionDialog] = useState(false)\n  const [pendingMove, setPendingMove] = useState<[cg.Key, cg.Key]>()\n  const [pgn, setPgn] = useState<string>()\n\n  const updateBoard = (\n    move?: [cg.Key, cg.Key],\n    promotion?: PromotablePiece\n  ) => {\n    if (move) {\n      chess.move({\n        from: move[0] as Square,\n        to: move[1] as Square,\n        promotion: promotion,\n      })\n    }\n    setShapes(undefined)\n    setFen(chess.fen())\n    setLastMove(move)\n    setPgn(chess.pgn())\n  }\n\n  const handleMove: (orig: cg.Key, dest: cg.Key) => void = (orig, dest) => {\n    const isPromotion = chess\n      .moves({ verbose: true })\n      .some((move) => move.flags.indexOf(\"p\") !== -1 && move.from === orig)\n\n    if (isPromotion) {\n      setPendingMove([orig, dest])\n      setShowPromotionDialog(true)\n    } else {\n      updateBoard([orig, dest])\n    }\n  }\n\n  const handleDraw: (newShapes: DrawShape[]) => void = (newShapes) => {\n    setShapes(newShapes)\n  }\n\n  const handlePromotion: (piece: PromotablePiece) => void = (piece) => {\n    updateBoard(pendingMove, piece)\n    setShowPromotionDialog(false)\n  }\n\n  const reset = () => {\n    chess.reset()\n    updateBoard()\n  }\n\n  const undo = () => {\n    if (chess.undo()) {\n      updateBoard()\n    }\n  }\n\n  const gameStatus: () => string = () => {\n    if (chess.in_stalemate()) {\n      return \"Stalemate\"\n    } else if (chess.in_checkmate()) {\n      const winningSide = chess.turn() === \"w\" ? \"Black\" : \"White\"\n      return `Checkmate: ${winningSide} wins`\n    } else if (chess.in_threefold_repetition()) {\n      return \"Draw by threefold repetition\"\n    } else if (chess.insufficient_material()) {\n      return \"Draw by insufficient material\"\n    } else if (chess.in_draw()) {\n      return \"Draw\"\n    } else {\n      return \"\"\n    }\n  }\n\n  return (\n    <>\n      <main className=\"max-w-xl mx-auto py-6 px-4\">\n        <Chessground\n          fen={fen}\n          orientation={orientation}\n          turnColor={toColor(chess)}\n          lastMove={lastMove}\n          check={chess.in_check()}\n          movable={{\n            free: false,\n            color: toColor(chess),\n            dests: toDests(chess),\n            events: { after: handleMove },\n          }}\n          premovable={{ enabled: false }}\n          onDraw={handleDraw}\n          shapes={shapes}\n          viewOnly={chess.game_over()}\n        />\n        <div className=\"py-2 space-y-2 sm:flex-auto sm:flex sm:flex-row sm:space-x-2 sm:space-y-0 sm:justify-center\">\n          <button\n            className=\"c-button\"\n            onClick={() =>\n              setOrientation(orientation === \"white\" ? \"black\" : \"white\")\n            }\n          >\n            Flip\n          </button>\n          <button className=\"c-button\" onClick={reset}>\n            Reset Board\n          </button>\n          <button\n            className=\"c-button\"\n            onClick={undo}\n            disabled={!chess.history().length}\n          >\n            Undo Move\n          </button>\n        </div>\n        {chess.game_over() && (\n          <div className=\"text-center py-2 bg-gray-900 text-gray-100 mt-2 mb-4\">\n            {gameStatus()}\n          </div>\n        )}\n        <div>{pgn}</div>\n        <div\n          className={classNames(\"fixed z-10 inset-0 overflow-y-auto\", {\n            hidden: !showPromotionDialog,\n          })}\n          aria-labelledby=\"modal-title\"\n          role=\"dialog\"\n          aria-modal=\"true\"\n        >\n          <div className=\"flex items-start justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\n            <div\n              className=\"fixed inset-0 bg-gray-500 bg-opacity-95 transition-opacity\"\n              aria-hidden=\"true\"\n            ></div>\n            <div className=\"inline-block align-middle bg-white rounded-lg text-left overflow-hidden my-4 shadow-xl transform transition-all sm:my-8 sm:max-w-lg sm:w-full\">\n              <div className=\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\n                <div className=\"sm:flex sm:items-center sm:justify-center mb-3\">\n                  <div className=\"mt-3 text-center sm:mt-0\">\n                    <h3\n                      className=\"text-xl leading-6 font-medium text-gray-900\"\n                      id=\"modal-title\"\n                    >\n                      Promote piece\n                    </h3>\n                  </div>\n                </div>\n                <div className=\"px-2 py-3 space-y-2 sm:flex sm:flex-row sm:space-x-2 sm:space-y-0 sm:justify-center\">\n                  <button\n                    type=\"button\"\n                    className=\"c-button\"\n                    onClick={() => handlePromotion(\"q\")}\n                  >\n                    Queen\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"c-button\"\n                    onClick={() => handlePromotion(\"r\")}\n                  >\n                    Rook\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"c-button\"\n                    onClick={() => handlePromotion(\"b\")}\n                  >\n                    Bishop\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"c-button\"\n                    onClick={() => handlePromotion(\"n\")}\n                  >\n                    Knight\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n      <footer className=\"mt-4 text-center w-full text-sm text-gray-700\">\n        Built using{\" \"}\n        <a href=\"https://github.com/ornicar/chessground\">Chessground</a> +{\" \"}\n        <a href=\"https://github.com/jhlywa/chess.js\">chess.js</a>.{\" \"}\n        <a href=\"https://github.com/mganjoo/react-chessground-chessjs-demo\">\n          View project on GitHub\n        </a>\n        .\n      </footer>\n    </>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./index.css\"\nimport App from \"./App\"\nimport reportWebVitals from \"./reportWebVitals\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}